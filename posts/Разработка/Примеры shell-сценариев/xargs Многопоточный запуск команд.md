<!--2024-06-24 01:12:02-->
## xargs Многопоточный запуск команд в bash

Приведу скрипт на *bash*-скрипте для подсчёта количества строк в файлах. 
В качестве задачи используется подсчёт строк с помощью утилиты *wc*. 
Вызов осуществляется внутри функции *runfunc*. 
В качестве запускаемой задачи можно использовать любую доступную в *Linux* утилиту: 
подсчёт размера файла/каталога, контрольной суммы, количества строк, копирование файлов и др.

    #!/bin/bash

    D=${1-}

    runfunc(){
      pushd "$1" >/dev/null
      echo $(ls | wc -l) "files in" $1
      popd >/dev/null
    }

    export -f runfunc

    find $D -type d -name '??*' | xargs -n1 -P10 -I{} bash -c 'runfunc "{}"'
