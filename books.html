<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Книги для чтения, описания книг и авторов">
<meta name="keywords" content="книги, романы, проза, литература для чтения">
<meta name="author" content="Grigoriy Eremin, Григорий Еремин, egax@bk.ru">
<meta name="robots" content="all">
<meta name="yandex-verification" content="bf07f0af8e739c66">
<meta name="google-site-verification" content="eWwGSnvveM7GniusD-nYN2KXBDPtXBHmhKRezn_TBg8">
<title>Книги / Сайт Григория Еремина</title>
<link rel="icon" href="/static/img/favicon.svg" type="image/svg">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/books.css">
<script src="/static/js/metrics.js" data-floor="1"></script>
<script src="/static/js/3rdparty/showdown.min.js"></script>
<script src="/static/js/updater.js"></script>
<script src="/static/js/template.js"></script>
</head>
<body>
<div id="root" class="main">
<div id="header" class="main scroll">
<a title="Записки и сообщения" href="/"><img src="/static/img/vesti_b.svg" alt="Записки"></a>
<a title="Заметки и посты" href="/posts.html"><img src="/static/img/posts_b.svg" alt="Заметки"></a>
<a title="Фотки и картинки" href="/foto.html"><img src="/static/img/fotki_b.svg" alt="Фотки"></a>
<a title="Аккорды, песни, стихи" href="/songs.html"><img src="/static/img/songs_b.svg" alt="Аккорды"></a>
<a title="Книги для чтения" href="/books.html"><img src="/static/img/books.svg" alt="Книги"></a>
<a title="Мои карты" href="/dbcartajs"><img src="/static/img/dbcartajs_b.svg" onload="this.scrollIntoView()" alt="Карты"></a>
</div>
<div id="page_header" class="main"></div>
<div id="page_content" class="main"></div>
<div id="page_footer" class="main"></div>
<p class="cfloat smaller gray hspace">
  <i>P.S.</i> Все тексты, представленные на сайте, взяты из свободных источников или являются авторским творчеством.
</p>
<table id="footer" class="main"><tr>
<td align="center"><a href="//metrika.yandex.ru/stat/?id=65044687&amp;from=informer" target="_blank" rel="nofollow"><img src="//informer.yandex.ru/informer/65044687/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры)" class="ym-advanced-informer" data-cid="65044687" data-lang="ru" /></a></td>
<td><a title="Исходный код" href="//github.com/egaxegax/egaxegax.github.io">Source</a></td>
<td class="smaller">2011-24</td></tr>
</table>
</div>
<script>
  var GENRES={
    adv_animal:"Природа и животные",adv_geo:"Путешествия и география",adv_history:"Исторические приключения",adv_indian:"Приключения про индейцев",adv_maritime:"Морские приключения",adventure:"Приключения",antique:"Старинная литература",biogr_leaders:"Биографии",child_adv:"Детские приключения",child_prose:"Детская проза",children:"Детская литература",child_sf:"Детская фантастика",child_tale:"Сказка",city_fantasy:"Городское фэнтези",det_action:"Боевик",det_classic:"Классический детектив",det_crime:"Криминальный детектив",det_espionage:"Шпионский детектив",det_hard:"Крутой детектив",det_history:"Исторический детектив",det_police:"Полицейский детектив",detective:"Детектив",dramaturgy:"Драматургия",economics:"Экономика",fantasy_fight:"Боевое фэнтези",foreign_adventure:"Зарубежные приключения",foreign_contemporary:"Современная зарубежная литература",foreign_detective:"Зарубежные детективы",foreign_fantasy:"Зарубежное фэнтези",foreign_love:"Зарубежные любовные романы",home_pets:"Домашние животные",home_sex:"Эротика, Секс",humor_prose:"Юмористическая проза",literature_adv:"Приключения",literature_classics:"Классическая литература",literature_drama:"Драма",literature_history:"История",literature_political:"Политика",literature_western:"Вестерн",love_contemporary:"Современные любовные романы",love_detective:"Остросюжетные любовные романы",love_erotica:"Эротика ",love_hard:"Страстная эротика",love_history:"Исторические любовные романы",love_sf:"Любовная фантастика",love_short:"Короткие любовные романы",magician_book:"Магия, волшебство",nonf_biography:"Биографии и Мемуары",other:"Прочее",poetry:"Поэзия",prose:"Проза",prose_classic:"Классическая проза",prose_contemporary:"Современная проза",prose_counter:"Контркультура",prose_history:"Историческая проза",prose_military:"Военная проза",prose_rus_classic:"Русская классическая проза",prose_su_classics:"Советская классическая проза",ref_dict:"Словари",ref_encyc:"Энциклопедии",reference:"Справочная литература",religion_esoterics:"Эзотерика",religion_orthodoxy:"Ортодоксальные учения",religion_rel:"Религия",religion_self:"Самосовершенствование",religion:"Религиозная литература",romance_fantasy:"Рыцарское фэнтези",romance_sf:"Рыцарская фантастика",romance:"Рыцарский роман",russian_fantasy:"Русское фэнтези",sci_history:"История",sci_linguistic:"Языкознание",sci_philosophy:"Философия",sf_action:"Боевая фантастика",sf_cyberpunk:"Киберпанк",sf_detective:"Детективная фантастика",sf_epic:"Эпическая фантастика",sf_etc:"Разная фантастика",sf_fantasy:"Фэнтези",sf_fantasy_city:"Городское фэнтези",sf_heroic:"Героическая фантастика",sf_history_avant:"Историческая авантюра",sf_history:"Альтернативная история",sf_horror:"Ужасы и Мистика",sf_humor:"Юмористическая фантастика",sf_mystic:"Мистика",sf_social:"Социально-психологическая фантастика",sf_space:"Космическая фантастика",sf:"Научная Фантастика ",thriller:"Триллер",vampire_book:"Вампиры",unrecognised:"Без рубрики"
  };

  document.getElementById('page_header').innerHTML =
'<p class="mtext hspace">Подборка описаний книг разных авторов из свободных источников.</p>';
  document.getElementById('page_content').innerHTML = addLoader(1);

  function strToUtc(dt){
    var dt = dt.split(' ');
    var d = dt[0].split('-'),
        t = dt[1].split(':');
    return Date.UTC(Number(d[0]),Number(d[1])-1,Number(d[2]),Number(t[0]),Number(t[1]),Number(t[2]))/1000.0;
  }

  function find(){
    if(!document.getElementById('tfind').value){
      document.getElementById('tfind').setCustomValidity("Заполните пустое поле");
    }else{
      window.location = '/books.html?find='+ document.getElementById('tfind').value;
    }
  }

  function addLast(r,p,ci){
    updateMetaTag('description', p.subj+', список описаний книг, '+p.title[2]);
    updateMetaTag('keywords', p.subj+', '+p.title[2]+', книги');
    document.getElementById(p.id).innerHTML = 
  '<table class="msgtext inlbl vtop" style="min-width:320px; max-width:320px"><tr>'+
    '<td align="center" valign="top" style="min-width:140px; max-width:140px">'+
      '<img class="smaller gray rounded7" alt="'+p.subj+', '+p.title[2]+'" src="'+buildURL('books')+'/'+p.root+'/'+p.subj+'/'+p.title[2]+'.jpg" style="max-width:120px">'+
    '</td>'+
    '<td colspan="2" width="90%">'+
      '<a class="nodecor dark" href="//yandex.ru/search/?text='+p.subj+' '+p.title[2]+' скачать читать "> '+p.title[2]+' </a>'+
      '<p class="smaller gray">Автор<br> <a class="nodecor" href="/books.html?'+tr(p.subj)+'">'+p.subj+'</a></p>'+
      '<p class="smaller gray">Жанр<br> <a class="nodecor" href="/books.html?'+tr(p.root)+'">'+(GENRES[p.root]||p.root)+'</a></p>'+
    '</td></tr><tr>'+
  '</table>'+ 
  '<div id="yandex_rtb_'+p.i+'" class="inlbl vtop bmarg mw_2 mh_3"></div>'+
  '<div class="msgtext">'+
    '<div>'+
      (!isNaN(ci) && r.split(' ').length>14 ? r.slice(0,r.split(' ').slice(0,14).join(' ').length)+'... '+
        '<a class="nodecor hspace smaller" href="/books.html?'+tr(p.subj)+'/'+tr(p.title[2])+'"> Читать ещё </a></div>'
      : r+
        '<a class="nodecor hspace smaller" href="//yandex.ru/search/?text='+p.subj+' '+p.title[2]+' скачать читать "> Найти и читать... </a></div>')+
  '</div>'+
  '<div class="msgfooter">'+
    '<a class="nodecor hspace" href="/books.html?'+tr(p.subj)+'/'+tr(p.title[2])+'"> #'+((p.i+(ci||0)))+'</a>'+
    '<span class="gray"><i>'+buildDate(p.title[3])+'</i></span>'+
  '</div>';
    if(window.addYaRTB_Block) addYaRTB_Block(p.i, false, YA_RTB[5]);
  }
  
  function addAbout(r,p){
    var converter = new showdown.Converter(), // to markdown    
        text = r,
        html = converter.makeHtml(text);
    updateMetaTag('description', p.subj+', '+text.replace(/(<([^>]+)>)/gi, ''));
    updateMetaTag('keywords', p.subj+', книги');
    document.getElementById(p.id).innerHTML = 
  '<table class="msgtext collapse"><tr>'+
    '<td class="about"><img class="rounded" src="'+buildURL('books')+'/img/'+tr(p.subj)+'.jpg'+'" alt=""></td>'+
    '<td>'+html+'</td></tr>'+
  '</table>';
  }

  function addPageContent(roots, wrts, books, page){
    PAGE.lock = 1;
    if(!books.length){
      document.getElementById('page_content').innerHTML += addNotFound();
      return 1;
    }
    page.bottom = (page.num)*page.per;
    page.top = page.bottom+page.per;
    page.titles = books.slice(page.bottom, page.top);
    for(var i=0; i<page.titles.length; i++){
      var subj = wrts[page.titles[i][0]][0],
          root = roots[page.titles[i][4]][0],
          title = page.titles[i][2];
      document.getElementById('page_content').innerHTML += 
    '<div id="book'+(i+page.bottom)+'">'+addLoader(i==0)+'</div>';
      upfunc({id: 'book'+(i+page.bottom), if: i==1, i: (i+page.bottom), root: root, subj: subj, title: page.titles[i], url: buildURL('books')+'/'+root+'/'+subj+'/'+title+'.md'}, function(r,p,st){
        var wrap = document.getElementById(p.id);
        wrap.innerHTML = '';
        if(st == 200) { // skip Not Found pages
          wrap.className = 'wrap';
          (p.title[2] == 'about') ? addAbout(r,p) : 
            page.view == 'book' ? addLast(r,p) :
            page.view == 'list' ? addLast(r,p,0) : addLast(r,p,1);
        }
      });
    }
    if(page.titles.length){
      document.getElementById('page_footer').innerHTML = 
        addPaginator(books, page,
      '<button onclick="this.disabled = addPageContent(ROOTS, SUBJ, BOOKS, PAGE)" class="rounded nopad hmarg bigger" title="Загрузить ещё">&#8634;</button>');
    }
    page.num++;
    setTimeout(function(){ PAGE.lock = (page.titles.length == 0); }, 500);
    return (page.titles.length == 0);
  }

  upfunc({url: buildURL('books')+'/index.js'}, function(s){
    eval(s);
    window.PAGE = {};
    PAGE.per = 3;
    PAGE.view = 'last';
    PAGE.num = urlParams().page||0; // start num page 
    window.BOOKS = TITLES;
    var page_header = 
      '<p class="mtext hspace">'+
         '<input class="rfloat nopad" id="tfind" maxlength="100" size="5" type="text" placeholder="&#128269;" onkeydown="if(event.keyCode==13) { event.preventDefault(); find(); return false; }">'+
        'Описаний <b><i>$COUNT</i></b> по &emsp; <a href="/bwrts.html"> Авторам</a> &nbsp; '+
          '<a href="/bgenres.html">Жанрам</a>'+
      '</p>';
    for(var p in urlParams()){
      var pp = p.split('/');
      if(p == 'page' && urlParams().page){ // ?page
        // skip paginate
        document.title += ' - ' + urlParams().page;
      }else if(p == 'ysclid' && urlParams().ysclid){ // ?ysclid
        // skip ya.ru search
      }else if(p == 'find' && urlParams().find){ // ?find
        BOOKS = BOOKS.filter(function(tit){ 
          return SUBJ[tit[0]][0].search(eval("/"+decodeURI(urlParams().find)+"/i"))>-1 || 
                 tit[2].search(eval("/"+decodeURI(urlParams().find)+"/i"))>-1;
        });
        BOOKS = BOOKS.sort(function(a,b){ return arraySort(a[2],b[2]); });
        if(BOOKS.length){ 
          PAGE.view = 'last';
          page_header = 
        '<p class="mtext hspace">Поиск: <i>'+decodeURI(urlParams().find)+'</i> &emsp; <i class="counter">('+BOOKS.length+')</i></p>';
          document.title = SUBJ[BOOKS[0][0]][0] + ', книги, тексты - ' + document.title;
        }
        PAGE.per = 10;
      }else if(pp.length>1){ // ?wrt/book
        BOOKS = BOOKS.filter(function(tit){ return (tr(SUBJ[tit[0]][0])==pp[0] && tr(tit[2])==pp[1]); });
        if(BOOKS.length){
          PAGE.view = 'book';
          page_header = 
        '<p>'+
          '<h2 class="nomarg nopad grid">'+
            '<a class="nodecor hspace" href="/books.html?'+tr(SUBJ[BOOKS[0][0]][0])+'">'+SUBJ[BOOKS[0][0]][0]+'</a> '+
            '<span class="hspace">'+BOOKS[0][2]+'</span>'+
          '</h2>'+
        '</p>';
          document.title = SUBJ[BOOKS[0][0]][0] + ', ' + BOOKS[0][2] + ' - ' + document.title;
          BOOKS = [[BOOKS[0][0],BOOKS[0][1],'about',0,BOOKS[0][4]]].concat(BOOKS);  // +about page
        }
      }else if(pp.length>0){ // ?wrt ?genre
        var gnr, wrt;
        BOOKS = [].concat( 
          gnr = BOOKS.filter(function(tit){ return (tr(ROOTS[tit[4]][0]) == pp[0]); }), // filter by genres
          wrt = BOOKS.filter(function(tit){ return (tr(SUBJ[tit[0]][0]) == pp[0]); }) // filter by writer
        );
        BOOKS = BOOKS.sort(function(a,b){ return arraySort(a[2],b[2]); });
        if(BOOKS.length){ 
          PAGE.view = 'list';
          page_header = 
        '<p>'+
          '<h2 class="nomarg nopad">'+
            '<a class="nodecor hspace" href="'+
              (wrt.length>0 ? '/books.html?'+tr(SUBJ[BOOKS[0][0]][0]) : '') + '">'+
              (wrt.length>0 ? SUBJ[BOOKS[0][0]][0] : GENRES[ROOTS[BOOKS[0][4]][0]]||ROOTS[BOOKS[0][4]][0]) +
            '</a> &emsp; '+
            '<span class="gray"><i class="counter">('+ BOOKS.length+')</i></span>'+
          '</h2>'+
        '</p>';
          if(gnr.length>0){
            document.title = (GENRES[ROOTS[BOOKS[0][4]][0]]||ROOTS[BOOKS[0][4]][0]) + ', книги, тексты - ' + document.title;
          }
          if(wrt.length>0){
            document.title = SUBJ[BOOKS[0][0]][0] + ', книги, тексты - ' + document.title;
            BOOKS = [[BOOKS[0][0],BOOKS[0][1],'about',0,BOOKS[0][4]]].concat(BOOKS);  // +about page
          }
        }
      }
    }
    document.getElementById('page_header').innerHTML = page_header.replace('$COUNT', TITLES.length);
    document.getElementById('page_content').innerHTML = '';
    addPageContent(ROOTS, SUBJ, BOOKS, PAGE);
      // infinite scroll
    document.addEventListener('scroll', function() {
      if(!PAGE.lock && (window.pageYOffset + window.innerHeight) > document.getElementById('root').offsetHeight-10){
        addPageContent(ROOTS, SUBJ, BOOKS, PAGE);
      }
    });
  });

</script>
</body>
</html>
