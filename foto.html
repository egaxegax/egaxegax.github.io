<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Подборка фотографий о природе, местах, людях">
<meta name="keywords" content="фотки, картинки, тексты, заметки, фото">
<meta name="author" content="Grigoriy Eremin, Григорий Еремин, egax@bk.ru">
<meta name="yandex-verification" content="bf07f0af8e739c66">
<meta name="google-site-verification" content="eWwGSnvveM7GniusD-nYN2KXBDPtXBHmhKRezn_TBg8">
<title>Фотки / Сайт Григория Еремина</title>
<link rel="icon" href="/static/img/favicon.svg" type="image/svg">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="canonical" href="foto.html">
<style>
img { border:2px transparent solid }
img:hover { border:2px yellow solid }
</style>
<script src="/static/js/updater.js"></script>
<script src="/static/js/template.js"></script>
<script src="/static/js/3rdparty/dbcartasvg.js"></script>
</head>
<body>
<div id="header" class="main bg nowrap scroll">
<a title="Записки и сообщения" href="/"><img src="/static/img/vesti.svg" alt="Записки"></a>
<a title="Заметки и посты" href="/posts.html"><img src="/static/img/posts.svg" alt="Заметки"></a>
<a title="Фотки и картинки" href="/foto.html"><img src="/static/img/fotki_a.svg" onload="this.scrollIntoView()" alt="Фотки"></a>
<a title="Аккорды, песни, стихи" href="/songs.html"><img src="/static/img/songs.svg" alt="Аккорды"></a>
<a title="Книги для чтения" href="/books.html"><img src="/static/img/books.svg" alt="Книги"></a>
</div>
<div id="page_header" class="main"></div>
<div id="page_content" class="main"></div>
<div id="page_footer" class="main"></div>
<table id="footer" class="main"><tr>
<td id="livecounter"><a href="//www.liveinternet.ru/click" target="_blank"><img id="licntADF8" width="31" height="31" style="border:0" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодня" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAEALAAAAAABAAEAAAIBTAA7" alt=""/></a></td>
<td id="yacounter"><a href="https://metrika.yandex.ru/stat/?id=65044687&amp;from=informer" target="_blank" rel="nofollow"><img src="https://informer.yandex.ru/informer/65044687/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" class="ym-advanced-informer" data-cid="65044687" data-lang="ru" /></a></td>
<td id="credits"><a title="О сайте и контакты" href="/about.html">Контакты</a> &emsp; &emsp; 2011-2022 </td></tr>
</table>
<script>

  document.getElementById('page_header').innerHTML = 
'<table width="99%" class="mtext collapse"><tr>'+
  '<td id="foto_header" class="hspace"><p>Загружаем последнюю фотку из альбома.</p></td>'+
  '<td align="right">'+
    '<select id="albumlist"></select>'+
  '</td>'+
'</tr></table>';
  document.getElementById('page_content').innerHTML = 
'<div class="wrap">'+
  '<div id="mcol" style="height:'+(document.getElementById('page_content').offsetHeight)+'px"></div>'+
'</div>';
  document.getElementById('page_footer').innerHTML = 
'<div class="wrap">'+
  '<div id="mlist" class="main nowrap scroll"></div>'+
'</div>'+
'<p class="cfloat smaller gray hspace">'+
  '<i>P.S.</i> Подборка различных фоток, снтых на телефон или взятых из свободных источников. &nbsp; '+
  '<a href="/fotki.html">Ещё фотки</a>'+
'</p>';

  var childs=[];
  var DC = new dbCartaSvg({
    id:'mcol',
    bg: 'rgb(240,245,240)',
    sbar: false,
    height: document.getElementById('mcol').offsetHeight
  });

  var img = new Image();
  img.onload = function() {
    for(var i=0; i<childs.length; i++)
      DC.vp.removeChild(childs[i]);
    childs = [];
    var ratio = this.width/this.height,
        vs = DC.viewsizeOf();  // map sizes degrees
    var crds = [[-vs[1]*ratio,vs[1]],[-vs[3]*ratio,vs[3]]],
        pts = [DC.toPoints(crds[1]), DC.toPoints(crds[0])];
    var img = DC.append('image', {
      width:  pts[0][0]-pts[1][0],
      height: pts[0][1]-pts[1][1],
      x: pts[1][0],
      y: pts[1][1],
      preserveAspectRatio:'none'
    });
    img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', this.src);
    DC.attr(img, { cursor: 'pointer' });
    childs.push(img);  
    document.title = 'Фотки / Сайт Григория Еремина - ' + this.title;
    document.getElementById('foto_header').innerHTML = '<p>' + this.title + '</p>';    
  };

  upfunc({url: buildURL('foto')+'/index.js'}, function(s){
    eval(s);
    for(var k in SUBJ){
      var falb = TITLES.filter(function(f){ return (f[0] == k); });
      document.getElementById('albumlist').innerHTML +=
    '<option value="'+k+'"'+(k == TITLES[0][0] ? ' selected ' : '')+'>'+
      SUBJ[k][0]+' ['+falb.length+']'+
    '</option>';
    }
    document.getElementById('albumlist').onchange = function(){
      var opt = this.options[this.selectedIndex],
          urls = TITLES.filter(function(a){ return a[0] == opt.value; });
      document.getElementById('mlist').innerHTML = '';
      for(var i in urls) {
        var im = new Image();
        im.style.cursor = 'pointer';
//        im.width = 100;
        im.alt = i;
        im.fullsrc = '/foto/' + ROOTS[urls[i][4]][0]+ '/'+ SUBJ[urls[i][0]][0]+ '/'+ urls[i][2] + '.JPG';
        im.src = '/foto/' + ROOTS[urls[i][4]][0]+ '/'+ SUBJ[urls[i][0]][0]+ '/th/'+ urls[i][2] + '.jpeg';
        im.title = urls[i][2];
        im.onclick = function(){
          img.src = this.fullsrc;       
          img.title = this.title;
        };
        if(i==0) {
          img.src = im.fullsrc; 
          img.title = im.title;
        };
        im.onload = function(){ 
          document.getElementById('mlist').appendChild(this);
        };
      }
    }
    document.getElementById('albumlist').onchange();
  });
  
</script>
<script src="/static/js/metrics.js"></script>
</body>
</html>
