<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Подборка фотографий о природе, местах, людях">
<meta name="keywords" content="фотки, картинки, тексты, заметки, фото">
<meta name="author" content="Grigoriy Eremin, Григорий Еремин, egax@bk.ru">
<meta name="yandex-verification" content="bf07f0af8e739c66">
<meta name="google-site-verification" content="eWwGSnvveM7GniusD-nYN2KXBDPtXBHmhKRezn_TBg8">
<title>Фотки / Сайт Григория Еремина</title>
<link rel="icon" href="/static/img/favicon.svg" type="image/svg">
<link rel="stylesheet" href="/static/css/main.css">
<link rel="stylesheet" href="/static/css/foto.css">
<link rel="canonical" href="foto.html">
<script defer src="/static/js/metrics.js" data-floor="1"></script>
<script src="/static/js/updater.js"></script>
<script src="/static/js/template.js"></script>
</head>
<body>
<div id="header" class="main scroll">
<a title="Записки и сообщения" href="/"><img src="/static/img/vesti_b.svg" alt="Записки"></a>
<a title="Заметки и посты" href="/posts.html"><img src="/static/img/posts_b.svg" alt="Заметки"></a>
<a title="Фотки и картинки" href="/foto.html"><img src="/static/img/fotki.svg" onload="this.scrollIntoView()" alt="Фотки"></a>
<a title="Аккорды, песни, стихи" href="/songs.html"><img src="/static/img/songs_b.svg" alt="Аккорды"></a>
<a title="Книги для чтения" href="/books.html"><img src="/static/img/books_b.svg" alt="Книги"></a>
<a title="Мои карты" href="/dbcartajs"><img src="/static/img/dbcartajs_b.svg" alt="Карты"></a>
</div>
<div id="page_header" class="main"></div>
<div id="page_content" class="main"></div>
<div id="page_footer" class="main"></div>
<p class="cfloat smaller gray hspace">
  <i>P.S.</i> Подборка различных фоток, снятых на телефон или взятых из свободных источников. &nbsp; 
  <a href="/fotki.html">Ещё фотки</a>
</p>
<table id="footer" class="main"><tr>
<td id="livecounter"><a href="//www.liveinternet.ru/click" target="_blank"><img id="licntADF8" width="31" height="31" style="border:0" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодня" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAEALAAAAAABAAEAAAIBTAA7" alt=""/></a></td>
<td id="yacounter"><a href="https://metrika.yandex.ru/stat/?id=65044687&amp;from=informer" target="_blank" rel="nofollow"><img src="https://informer.yandex.ru/informer/65044687/3_1_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" class="ym-advanced-informer" data-cid="65044687" data-lang="ru" /></a></td>
<td id="credits"><a title="Исходный код" href="https://github.com/egaxegax/egaxegax.github.io">Source</a> &emsp; &emsp; <span>2011-2023</span> </td></tr>
</table>
<script>

  document.getElementById('page_header').innerHTML = 
'<p class="mtext hspace">'+
   '<select class="rfloat" id="albumlist"></select>'+
  '<span id="foto_header">Загружаем последнюю фотку из альбома.</span>'+
'</p>';
  document.getElementById('page_content').innerHTML = 
'&emsp;<img class="rounded loader" src="/static/img/loader.gif">';

  function addFoto(p){
    var html = 
  '<a href="'+p.fullurl+'">'+
    '<img class="foto" src="'+p.url+'" title="'+p.title[2]+'" alt="">'+
  '</a>'; 
    var meta = document.head.getElementsByTagName('meta');
    for(var j in meta){
      if(meta[j].name == 'description' && p.if) meta[j].content = p.title[2]+', '+ p.subj;
    }
    document.getElementById(p.id).innerHTML = 
  '<div class="msgtext cfloat">'+html+'</div>'+
  '<h2 class="msgtext cfloat">'+p.title[2]+'</h2>'+
  '<div class="mh120" id="yandex_rtb_"'+(p.i)+'></div>'+
  '<div class="msgfooter">'+
    '<a class="nodecor" href="/foto.html?'+tr(p.subj)+'">'+p.subj+'</a>'+
    '<a class="nodecor hspace" href="/foto.html?'+tr(p.subj)+'/'+tr(p.title[2])+'"> #'+ p.i +' </a>'+
    '<span class="gray"><i> '+buildDate(p.title[3])+'</i></span>'+
  '</div>';
    if(window.addYaRTB_Block) { addYaRTB_Block(p.i, false, YA_RTB[3]); };
  }

  function addPageContent(roots, subjects, fotos, page){
    page.bottom = (page.num)*page.per;
    page.top = page.bottom+page.per;
    page.titles = fotos.slice(page.bottom, page.top);
    for(var i=0; i<page.titles.length; i++){
      var subj = subjects[page.titles[i][0]][0],
          root = roots[page.titles[i][4]][0],
          title = page.titles[i][2];
      document.getElementById('page_content').innerHTML += 
    '<div id="foto'+(i+page.bottom)+'">'+
      (i==0 ? '&emsp;<img class="rounded loader" src="/static/img/loader.gif">' : '')+
    '</div>';
      (function(p){
        var wrap = document.getElementById(p.id);
        wrap.className = 'wrap';
        addFoto(p);
      })({id: 'foto'+(i+page.bottom), i: 1+(i+page.bottom), if: i==0, subj: subj, title: page.titles[i], 
        url: buildURL('foto')+'/'+root+'/'+subj+'/th/'+title+'.jpg',
        fullurl: buildURL('foto')+'/'+root+'/'+subj+'/'+title+'.jpg'});
    }
    if (page.titles.length){
      document.getElementById('page_footer').innerHTML = 
        addPaginator(fotos, page,
      '<button onclick="this.disabled = addPageContent(ROOTS, SUBJ, FOTOS, PAGE)" class="rounded nopad bigger" title="Загрузить ещё">&#8634;</button>');
    } else {
      updateMetaTag('robots', 'noindex');
      document.getElementById('page_content').innerHTML += addNotFound();
    }
    page.num++;
    return (page.titles.length == 0);
  }

  upfunc({url: buildURL('foto')+'/index.js'}, function(s){
    eval(s);
    window.PAGE = { 
      per: 1,                  // blocks 1 page
      num: urlParams().page||0 // start num page 
    };
    window.FOTOS = TITLES;
    var album = -1;
    for(var p in urlParams()){
      var pp = p.split('/');
      if(p == 'page' && urlParams().page){ // ?page
        // skip paginate
      }else if(p == 'ysclid' && urlParams().ysclid){ // ?ysclid
        // skip ya.ru search
      }else if(pp.length>1){ // ?alb/foto
        FOTOS = FOTOS.filter(function(tit){ return (tr(SUBJ[tit[0]][0])==tr(decodeURI(pp[0])) && tr(tit[2]).split('_')[0]==pp[1].split('_')[0]); });
        if(FOTOS.length) document.title = SUBJ[FOTOS[0][0]][0] +', '+ FOTOS[0][2] +' - '+ document.title;
        SUBJ.map(function(s, i, items){ if (tr(items[i][0]) == tr(decodeURI(pp[0]))) album = i; });
      }else if(pp.length>0){ // ?alb
        FOTOS = FOTOS.filter(function(tit){ return (tr(SUBJ[tit[0]][0]) == tr(decodeURI(pp[0]))); });
        if(FOTOS.length) document.title = SUBJ[FOTOS[0][0]][0] + ' - '+ document.title;
        SUBJ.map(function(s, i, items){ if (tr(items[i][0]) == tr(decodeURI(pp[0]))) album = i; });
      }
    }
    document.getElementById('foto_header').innerHTML =
  'Всего <i><b>'+FOTOS.length+'</b></i> фото';
    document.getElementById('albumlist').innerHTML =
  '<option value="-1"'+(album == -1 ? ' selected ' : '')+'> Все ['+TITLES.length+']</option>';
    for(var k in SUBJ){
      var falb = TITLES.filter(function(f){ return (f[0] == k); });
      document.getElementById('albumlist').innerHTML +=
    '<option value="'+SUBJ[k][0]+'"'+(k == album ? ' selected ' : '')+'>'+SUBJ[k][0]+' ['+falb.length+']</option>';
    }
    document.getElementById('albumlist').onchange = function(){
      var opt = this.options[this.selectedIndex];
      window.location = '/foto.html' + (opt.value == '-1' ? '' : '?' + opt.value);
    };
    document.getElementById('page_content').innerHTML = '';
    addPageContent(ROOTS, SUBJ, FOTOS, PAGE);
  });

</script>
</body>
</html>
